<div 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="api.main_template.macros['master']">

  <div metal:fill-slot="content">

    <div id="content">

      <div id="subnav" tal:condition="tutorials">
        <div id="news">
          <div class="newsheader">Recent tutorials</div>
          <ul>
            <li tal:repeat="tutorial tutorials[:5]">
              <a href="${tutorial.url}">${tutorial.title}, by ${tutorial.author} on ${tutorial.date}</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div id="one">
        
        <h1>BFG Tutorial Bin</h1>
        <div class="message" tal:condition="message|None"
             tal:content="message">Error message</div>
        
        <a href="${tutorialbin_url}add">Add tutorial</a>
        
        <div class="userinfo" tal:condition="user">
          You are currently logged in as <b>${user}</b>
          <a href="${api.application_url}/logout">Log Out</a>
        </div>
        
        <div class="left">
          <p>If you have a piece of code that you can share to enlighten the community, but don't have the time to write a long document, consider using our <a href="${tutorialbin_url}add">quick and dirty tutorial maker</a>. Just paste some code, add an explanatory text and a title and you're done.</p>
          
          <div tal:condition="latest">
            <style tal:content="style_defs"></style>
            <h2>${latest['title']}</h2>
            <span class="entryheader">Author:</span> ${latest['author_name']} <br/>
            <span class="entryheader">Date:</span> ${latest['date']} <br/>
            <span class="entryheader" tal:condition="latest['author_url']">External URL: <a href="${latest['author_url']}">${latest['author_url']}</a></span><br tal:condition="latest['author_url']"/>
            <div class="tutorialtext">${latest['text']}></div>
            <div>${latest['formatted_code']}</div>
          </div>
          
        </div>
        
      </div>
    </div>
  </div>
</div>

