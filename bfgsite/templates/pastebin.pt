<div 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="api.main_template.macros['master']">

  <div metal:fill-slot="content">

    <div id="content">

      <div id="subnav" tal:condition="pastes">
        <div id="news">
          <div class="newsheader">Previous Pastes</div>
          <ul>
            <li tal:repeat="paste pastes[:5]">
              <a href="${paste.url}"
                 >${paste.author} on ${paste.date} (${paste.language or 'auto'})</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div id="one">
        
        <h1>BFG Paste Bin</h1>
        <div class="message" tal:condition="message|None"
             tal:content="message">Error message</div>
        
        <div class="userinfo" tal:condition="user">
          You are currently logged in as <b>${user}</b>
          <a href="${application_url}/logout">Log Out</a>
        </div>
        
        <div class="left">
          
          <form action="${pastebin_url}" method="POST">
            <input type="hidden" name="form.submitted"/>
            <fieldset>
              <legend>Please enter your name and paste your text.</legend>
              <div class="field">
                <label for="author_name">Name</label>
                <input type="text" name="author_name" value="${author_name}" size="25"/>
              </div>
              <div class="field">
                <label for="language">Language</label>
                <select name="language">
                  <option value="" selected="selected">-- Auto detect --</option>
                  <option tal:repeat="lexer lexers"
                          value="${lexer.alias}"
                          >${lexer.name}</option>
                </select>
              </div>
              <div class="field">
                <label for="paste">Paste Text</label>
                <textarea name="paste" rows="8" cols="75">${paste}</textarea>
              </div>
              <input type="submit" />
            </fieldset>
          </form>
          
        </div>
        
      </div>
    </div>
  </div>
</div>
