<div 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="api.main_template.macros['master']">

  <div metal:fill-slot="content">

    <div id="content">

      <div id="subnav" tal:condition="tutorials">
        <div id="news">
          <div class="newsheader">Recent tutorials</div>
          <ul>
            <li tal:repeat="tutorial tutorials[:5]">
              <a href="${tutorial.url}">${tutorial.title}, by ${tutorial.author} on ${tutorial.date}</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div id="one">
        
        <h1>${pagetitle}</h1>

        <div class="message" tal:condition="message|None"
             tal:content="message">Error message</div>
        
        <a href="${tutorialbin_url}">Return to main page</a>
        
        <div class="left">

          <p>Please add your tutorial. If you already made an article
          or blog post somewhere, use the URL field to add it and type
          in a small text description.</p>
          
          <form action="${form_url}" method="POST">
            <input type="hidden" name="form.submitted"/>
            <fieldset>
              <legend>New tutorial</legend>
              <div class="field">
                <label for="author_name">Author name</label>
                <div tal:content="api.fullname" id="author_name"/>
              </div>
              <div class="field">
                <label for="title">Tutorial title</label>
                <input type="text" name="title" value="${title}" size="25"/>
              </div>
              <div class="field">
                <label for="url">URL (for additional info or code)</label>
                <input type="text" name="url" value="${url}" 
                       size="25"/>
              </div>
              <div class="field">
                <label for="text">Tutorial Text or description</label>
                <textarea name="text" rows="14" cols="80">${text}</textarea>
              </div>
              <div class="field">
                <label for="language">Language</label>
                <select name="language">
                  <option value="" selected="selected">-- Auto detect --</option>
                  <option tal:repeat="lexer lexers"
                          value="${lexer.alias}"
                          >${lexer.name}</option>
                </select>
              </div>
              <div class="field">
                <label for="code">Tutorial code</label>
                <textarea name="code" rows="8" cols="80">${code}</textarea>
              </div>
              <input type="submit" />
            </fieldset>
          </form>
          
        </div>
        
      </div>
    </div>
  </div>
</div>
